<div class="container">
  <!-- Messages -->
  <div class="messages" *ngIf="successMessage || errorMessage">
    <div class="message success" *ngIf="successMessage">
      {{ successMessage }}
    </div>
    <div class="message error" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
  </div>

  <!-- Statistiques -->
  <div class="stats-grid">
    <div class="stat-card total">
      <span class="stat-icon">ğŸ“Š</span>
      <div class="stat-content">
        <div class="stat-value">{{ suggestions.length }}</div>
        <div class="stat-label">Total</div>
      </div>
    </div>
    <div class="stat-card accepted">
      <span class="stat-icon">âœ…</span>
      <div class="stat-content">
        <div class="stat-value">{{ getAcceptedCount() }}</div>
        <div class="stat-label">AcceptÃ©es</div>
      </div>
    </div>
    <div class="stat-card pending">
      <span class="stat-icon">â³</span>
      <div class="stat-content">
        <div class="stat-value">{{ getPendingCount() }}</div>
        <div class="stat-label">En attente</div>
      </div>
    </div>
    <div class="stat-card rejected">
      <span class="stat-icon">âŒ</span>
      <div class="stat-content">
        <div class="stat-value">{{ getRejectedCount() }}</div>
        <div class="stat-label">RefusÃ©es</div>
      </div>
    </div>
    <div class="stat-card likes">
      <span class="stat-icon">â¤ï¸</span>
      <div class="stat-content">
        <div class="stat-value">{{ getTotalLikes() }}</div>
        <div class="stat-label">Total Likes</div>
      </div>
    </div>
  </div>

  <!-- Barre de recherche et filtres -->
  <div class="search-section">
    <div class="search-container">
      <input 
        type="text" 
        [(ngModel)]="searchText" 
        placeholder="Rechercher une suggestion..."
        class="search-input"
      >
      <button class="clear-search" *ngIf="searchText" (click)="clearSearch()">âœ•</button>
    </div>

    <div class="filters">
      <button 
        [class.active]="!showFavoritesView && currentFilter === 'all'"
        (click)="setFilter('all')"
        class="filter-btn">
        Toutes
      </button>
      <button 
        [class.active]="!showFavoritesView && currentFilter === 'acceptee'"
        (click)="setFilter('acceptee')"
        class="filter-btn accepted">
        âœ… AcceptÃ©es
      </button>
      <button 
        [class.active]="!showFavoritesView && currentFilter === 'en_attente'"
        (click)="setFilter('en_attente')"
        class="filter-btn pending">
        â³ En attente
      </button>
      <button 
        [class.active]="!showFavoritesView && currentFilter === 'refusee'"
        (click)="setFilter('refusee')"
        class="filter-btn rejected">
        âŒ RefusÃ©es
      </button>
      <button 
        [class.active]="showFavoritesView"
        (click)="showFavorites()"
        class="filter-btn favorite">
        â­ Favoris ({{ favorites.length }})
      </button>
      <button 
        *ngIf="showFavoritesView || currentFilter !== 'all' || searchText"
        (click)="resetFilters()"
        class="filter-btn clear">
        âœ• Effacer
      </button>
    </div>
  </div>

  <!-- Liste des suggestions -->
  <div class="suggestions-grid" *ngIf="!isLoading">
    <div *ngIf="displaySuggestions.length === 0" class="empty-state">
      <p>ğŸ˜” Aucune suggestion trouvÃ©e</p>
      <button *ngIf="showFavoritesView" (click)="resetFilters()" class="btn-primary">
        Voir toutes les suggestions
      </button>
      <button *ngIf="!showFavoritesView && (searchText || currentFilter !== 'all')" (click)="resetFilters()" class="btn-primary">
        Effacer les filtres
      </button>
    </div>

    <div *ngFor="let suggestion of displaySuggestions" 
         class="suggestion-card" 
         [ngClass]="suggestion.status">
      
      <div class="status-badge" [ngClass]="suggestion.status">
        <span *ngIf="suggestion.status === 'acceptee'">âœ…</span>
        <span *ngIf="suggestion.status === 'en_attente'">â³</span>
        <span *ngIf="suggestion.status === 'refusee'">âŒ</span>
        <span>{{ suggestion.status === 'acceptee' ? 'AcceptÃ©e' : 
                 suggestion.status === 'en_attente' ? 'En attente' : 'RefusÃ©e' }}</span>
      </div>

      <div class="card-header">
        <h3 class="suggestion-title">{{ suggestion.title }}</h3>
        <span class="category-tag">ğŸ“ {{ suggestion.category }}</span>
      </div>

      <p class="suggestion-description">{{ suggestion.description }}</p>

      <div class="card-footer">
        <div class="footer-item">
          <span>ğŸ“…</span>
          <span>{{ suggestion.date | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="footer-item likes">
          <span>â¤ï¸</span>
          <span>{{ suggestion.nbLikes }} j'aime</span>
        </div>
      </div>

      <div class="card-actions">
        <button class="action-btn like" (click)="incrementLikes(suggestion)">
          <span>ğŸ‘</span>
          <span>J'aime</span>
        </button>
        <button class="action-btn fav" (click)="toggleFavorite(suggestion)">
          <span>{{ isFavorite(suggestion) ? 'â­' : 'â˜†' }}</span>
          <span>{{ isFavorite(suggestion) ? 'Favori' : 'Ajouter' }}</span>
        </button>
        <button class="action-btn details" (click)="viewDetails(suggestion)">
          <span>ğŸ“„</span>
          <span>DÃ©tails</span>
        </button>
      </div>

      <div class="rejected-note" *ngIf="suggestion.status === 'refusee'">
        <span>ğŸš«</span>
        <span>Cette suggestion a Ã©tÃ© refusÃ©e</span>
      </div>
    </div>
  </div>

  <!-- Loader -->
  <div class="loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Chargement des suggestions...</p>
  </div>
</div>